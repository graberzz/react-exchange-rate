(this["webpackJsonpexchange-rate"]=this["webpackJsonpexchange-rate"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=(n(88),n(16)),s=n.n(i),u=n(25),l=n(13),f=n(155),d=n(151),p=n(152),v=n(156),m=n(153),h=function(e){var t=e.value,n=e.onValueChange,a=e.base,c=e.baseOptions,o=e.onBaseChange;return r.a.createElement(f.a,{display:"flex"},r.a.createElement(f.a,{mr:2},r.a.createElement(v.a,{inputProps:{min:0,"data-testid":"currency-input-input"},type:"number",variant:"outlined",value:t,onChange:function(e){n&&n(+e.target.value)}})),r.a.createElement(m.a,{inputProps:{"data-testid":"currency-input-select"},variant:"outlined",native:!0,value:a,onChange:function(e){o&&o(e.target.value)}},c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))},b=n(47),g=n(150),y=n(113),E=n(39),w=n(9),j=n(48),O=n(51),x=n.n(O),C=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://api.exchangeratesapi.io/latest".concat(t?"?base=".concat(t):""));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,c,o,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=i.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=i[r];return e.next=3,x.a.get("https://api.exchangeratesapi.io/history?start_at=".concat(t.start,"&end_at=").concat(t.end,"&symbols=").concat(a.join(","),"&base=USD"));case 3:return c=e.sent,o=c.data,e.abrupt("return",o.rates);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function T(e){return Object.entries(e).map((function(e,t){var n=Object(l.a)(e,2),a=n[0],r=n[1];return{date:a,value:Object.values(r)[0]}}))}var A=function(e){var t=e.baseFrom,n=e.baseTo,c="yyyy-MM-dd",o={start:j.DateTime.local().minus({days:5}).toFormat(c),end:j.DateTime.local().toFormat(c)};var i=Object(a.useReducer)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0,n=j.DateTime.local();switch(t.type){case"UPDATE_CHART_5D":return Object(b.a)({},e,{start:n.minus({days:5}).toFormat(c)});case"UPDATE_CHART_1M":return Object(b.a)({},e,{start:n.minus({months:1}).toFormat(c)});case"UPDATE_CHART_1Y":return Object(b.a)({},e,{start:n.minus({years:1}).toFormat(c)})}return e}),o),p=Object(l.a)(i,2),v=p[0],m=p[1],h=Object(a.useState)(),O=Object(l.a)(h,2),x=O[0],C=O[1];return Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(v,t,n);case 2:a=e.sent,C(T(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[v,t,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{display:"flex",justifyContent:"center"},r.a.createElement(g.a,{onClick:function(){return m({type:"UPDATE_CHART_5D"})}},"5D"),r.a.createElement(g.a,{onClick:function(){return m({type:"UPDATE_CHART_1M"})}},"1M"),r.a.createElement(g.a,{onClick:function(){return m({type:"UPDATE_CHART_1Y"})}},"1Y")),r.a.createElement(y.a,null,r.a.createElement(f.a,{width:300,height:200,display:"flex",justifyContent:"center",alignItems:"center"},x?r.a.createElement(E.a,{data:x,width:300,height:200},r.a.createElement(E.d,null),r.a.createElement(E.b,{argumentField:"date",valueField:"value"}),r.a.createElement(E.e,null),r.a.createElement(w.d,null),r.a.createElement(E.c,null)):r.a.createElement(d.a,null))))};function D(e,t,n,a){return(null===a||void 0===a?void 0:a.rates[n])&&(null===a||void 0===a?void 0:a.rates[t])?+((null===a||void 0===a?void 0:a.rates[n])/(null===a||void 0===a?void 0:a.rates[t])*e).toFixed(2):e}n(111);var S=function(){var e,t=Object(a.useState)(!0),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(1),v=Object(l.a)(i,2),m=v[0],b=v[1],g=Object(a.useState)("USD"),y=Object(l.a)(g,2),E=y[0],w=y[1],j=Object(a.useState)(1),O=Object(l.a)(j,2),x=O[0],k=O[1],T=Object(a.useState)("RUB"),S=Object(l.a)(T,2),_=S[0],U=S[1];Object(a.useEffect)((function(){var e=D(m,E,_,P);k(e)}),[m,E,_]),Object(a.useEffect)((function(){var e=D(x,_,E,P);b(e)}),[x]);var F=Object(a.useState)(),R=Object(l.a)(F,2),P=R[0],W=R[1];Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("USD");case 2:t=e.sent,W(t),k(D(m,E,_,t)),o(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var B=Object.keys(null!==(e=null===P||void 0===P?void 0:P.rates)&&void 0!==e?e:{});return r.a.createElement(f.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh"},c?r.a.createElement(d.a,{size:80}):r.a.createElement(p.a,{variant:"outlined",style:{display:"inline-block"}},r.a.createElement(f.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",p:2},r.a.createElement(f.a,{mr:2,mb:2},m," ",E," equals",r.a.createElement("div",{style:{fontSize:"36px",marginBottom:"16px"}},x," ",_),r.a.createElement(f.a,{mb:2},r.a.createElement(h,{value:m,onValueChange:b,base:E,onBaseChange:w,baseOptions:B})),r.a.createElement(h,{value:x,onValueChange:k,base:_,onBaseChange:U,baseOptions:B})),r.a.createElement(f.a,{display:"flex",flexDirection:"column"},r.a.createElement(A,{baseFrom:E,baseTo:_})))))},_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(S,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/exchange-rate",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/exchange-rate","/service-worker.js");_?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):U(t,e)}))}}()},83:function(e,t,n){e.exports=n(112)},88:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.cc1d775e.chunk.js.map